!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1)(),r="https://rawgit.com/DestinyDevs/BungieNetPlatform/master/three-tgx-loader/three.tgxloader.js";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var o={};window.DESTINYMODELCONFIG&&(o=window.DESTINYMODELCONFIG),o.apiKey||(o.apiKey=""),AFRAME.registerComponent("destiny-model",{schema:{itemHash:{type:"number"},game:{type:"string",default:"destiny2"},apiKey:{type:"string",default:o.apiKey},platform:{type:"string",default:"mobile"},d1Manifest:{type:"string",default:o.d1Manifest},d2Manifest:{type:"string",default:o.d2Manifest}},multiple:!1,init:function(){this.model=null,this.loader=null,this.loaderPromise=a().then(function(){this.loader=new THREE.TGXLoader}.bind(this))},update:function(){var t=this,e=this.el,n=this.data.itemHash,i=this.data.apiKey,r=this.data.d1Manifest,o=this.data.d2Manifest,a=this.data.game,s=this.data.platform;!(n&&i&&a)||"destiny2"===a&&"web"===s||"destiny2"===a&&!o||"mobile"===s&&!r||(this.remove(),this.loaderPromise.then(function(){THREE.TGXLoader.APIKey=i,THREE.TGXLoader.ManifestPath=r,THREE.TGXLoader.ManifestPath2=o,THREE.TGXLoader.Platform=s,this.loader.load({itemHashes:[n],game:a},function(n,i){var r=new THREE.Mesh(n,new THREE.MultiMaterial(i));r.rotation.x=-90*Math.PI/180,t.model=r,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"destiny",model:t.model})})}.bind(this)))},remove:function(){this.model&&this.el.removeObject3D("mesh")},pause:function(){},play:function(){}});var a=function(){var t;return function(){return t=t||i(r)}}()},function(t,e){function n(){return"script_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function i(t,e){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.id=e,n.src=t,n}function r(t){const e=document.getElementById(t),n=e.parentNode;try{n&&n.removeChild(e)}catch(t){}}function o(t){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}function a(t,e,a){return new a(function(a,s){const d=e.timeout||5e3,u=n(),l=i(t,u),m=setTimeout(function(){s(new Error("Script request to "+t+" timed out")),r(u)},d),c=function(t){clearTimeout(t)};l.addEventListener("load",function(t){a({ok:!0}),c(m),r(u)}),l.addEventListener("error",function(e){s(new Error("Script request to "+t+" failed "+e)),c(m),r(u)}),o(l)})}function s(t){return t=t||{},function(e,n){return n=n||{},a(e,n,t.Promise||Promise)}}t.exports=s}]);