!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var o=n(1)(),r="https://rawgit.com/DestinyDevs/BungieNetPlatform/master/three-tgx-loader/three.tgxloader.js";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");window.BUNGIEKEY||(window.BUNGIEKEY=""),AFRAME.registerComponent("destiny-model",{schema:{itemHash:{type:"number"},apiKey:{type:"string",default:window.BUNGIEKEY},game:{type:"string",default:"d2"},platform:{type:"string",default:"web"}},multiple:!1,init:function(){this.model=null,this.loader=null,this.loaderPromise=i().then(function(){this.loader=new THREE.TGXLoader}.bind(this))},update:function(){var t=this,e=this.el,n=this.data.itemHash,o=this.data.apiKey,r=this.data.game,i=this.data.platform;n&&o&&(this.remove(),this.loaderPromise.then(function(){THREE.TGXLoader.APIKey=o,THREE.TGXLoader.Platform=i,"d2"===r?THREE.TGXLoader.APIBasepath="https://www.bungie.net/Platform/Destiny2":THREE.TGXLoader.APIBasepath="https://www.bungie.net/d1/Platform/Destiny",this.loader.load(n,function(n,o){var r=new THREE.Mesh(n,new THREE.MultiMaterial(o));r.rotation.x=-90*Math.PI/180,t.model=r,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"gltf",model:t.model})})}.bind(this)))},remove:function(){this.model&&this.el.removeObject3D("mesh")},pause:function(){},play:function(){}});var i=function(){var t;return function(){return t=t||o(r)}}()},function(t,e){function n(){return"script_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(t,e){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.id=e,n.src=t,n}function r(t){const e=document.getElementById(t),n=e.parentNode;try{n&&n.removeChild(e)}catch(t){}}function i(t){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}function a(t,e,a){return new a(function(a,s){const d=e.timeout||5e3,u=n(),l=o(t,u),c=setTimeout(function(){s(new Error("Script request to "+t+" timed out")),r(u)},d),m=function(t){clearTimeout(t)};l.addEventListener("load",function(t){a({ok:!0}),m(c),r(u)}),l.addEventListener("error",function(e){s(new Error("Script request to "+t+" failed "+e)),m(c),r(u)}),i(l)})}function s(t){return t=t||{},function(e,n){return n=n||{},a(e,n,t.Promise||Promise)}}t.exports=s}]);