!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){var n=a(1)(),i="https://rawgit.com/lowlines/three-tgx-loader/master/three.tgxloader.js";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var r={};window.DESTINYMODELCONFIG&&(r=window.DESTINYMODELCONFIG),r.apiKey||(r.apiKey=""),AFRAME.registerComponent("destiny-model",{schema:{itemHash:{type:"number"},itemHashes:{type:"array"},shaderHash:{type:"number",default:0},shaderHashes:{type:"array"},game:{type:"string",default:"destiny2"},apiKey:{type:"string",default:r.apiKey},platform:{type:"string",default:"mobile"},d1Manifest:{type:"string",default:r.d1Manifest},d2Manifest:{type:"string",default:r.d2Manifest},isFemale:{type:"boolean",default:!1}},multiple:!1,init:function(){this.model=null,this.loader=null,this.loaderPromise=o().then(function(){this.loader=new THREE.TGXLoader}.bind(this))},update:function(){var e=this,t=this.el,a=this.data.itemHash,n=this.data.itemHashes||[a],i=this.data.shaderHash,r=this.data.shaderHashes||[i],o=this.data.isFemale,s=this.data.apiKey,d=this.data.d1Manifest,u=this.data.d2Manifest,l=this.data.game,m=this.data.platform;!(n&&s&&l)||"destiny2"===l&&"web"===m||"destiny2"===l&&!u||"mobile"===m&&!d||(this.remove(),this.loaderPromise.then(function(){THREE.TGXLoader.APIKey=s,THREE.TGXLoader.ManifestPath=d,THREE.TGXLoader.ManifestPath2=u,THREE.TGXLoader.Platform=m,this.loader.load({itemHashes:n,shaderHashes:r,game:l,isFemale:o},function(a,n){var i=new THREE.Mesh(a,new THREE.MultiMaterial(n));i.rotation.x=-90*Math.PI/180,e.model=i,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"destiny",model:e.model})})}.bind(this)))},remove:function(){this.model&&this.el.removeObject3D("mesh")},pause:function(){},play:function(){}});var o=function(){var e;return function(){return e=e||n(i)}}()},function(e,t){function a(){return"script_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function n(e,t){var a=document.createElement("script");return a.type="text/javascript",a.async=!0,a.id=t,a.src=e,a}function i(e){const t=document.getElementById(e),a=t.parentNode;try{a&&a.removeChild(t)}catch(e){}}function r(e){const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}function o(e,t,o){return new o(function(o,s){const d=t.timeout||5e3,u=a(),l=n(e,u),m=setTimeout(function(){s(new Error("Script request to "+e+" timed out")),i(u)},d),h=function(e){clearTimeout(e)};l.addEventListener("load",function(e){o({ok:!0}),h(m),i(u)}),l.addEventListener("error",function(t){s(new Error("Script request to "+e+" failed "+t)),h(m),i(u)}),r(l)})}function s(e){return e=e||{},function(t,a){return a=a||{},o(t,a,e.Promise||Promise)}}e.exports=s}]);